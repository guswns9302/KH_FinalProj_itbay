<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="review_boardMapper">
<select id="selectReview" resultType="web.com.itbay.review_board.model.review_boardDTO">

SELECT 
		A.id,
       (SELECT C.IMG_NAME FROM IMG C WHERE C.PRODUCT_ID = B.ID AND C.R_IMG = 'Y') 
	   AS IMG_NAME
     , A.PRODUCT_ID
     , B.SUBJECT
     , B.PRICE
     ,A.contents
     , A.create_DATE,
(SELECT D.nickname FROM members D  WHERE a.members_id=d.id AND D.master = 'N') 
	   AS usernickname
  FROM review_board A 
  LEFT JOIN PRODUCT_BOARD B ON A.PRODUCT_ID = B.ID
</select>


<insert id="insertreview" parameterType="web.com.itbay.review_board.model.review_boardDTO">
      INSERT INTO review_boarad
       VALUES(#{SUBJECT},#{CONTENTS})
       </insert>
</mapper>