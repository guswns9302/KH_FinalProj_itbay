<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ProductMapper">
	<select id="selectProduct" parameterType="web.com.itbay.product.model.ProductDTO" resultType="web.com.itbay.product.model.ProductDTO">
		SELECT A.SUBJECT, A.PRICE, A.SOLD_OUT, A.ID, 
	   (SELECT B.IMG_NAME FROM IMG B WHERE B.PRODUCT_ID = A.ID AND B.R_IMG = 'Y') 
	   	AS IMG_NAME
		FROM PRODUCT_BOARD A 
		WHERE 1 = 1 
		<if test="subject != null and subject != ''">
			AND A.SUBJECT LIKE '%'||#{subject}||'%'
		</if>
		<if test="sold_out != null and sold_out != ''">
			AND A.SOLD_OUT = #{sold_out}
		</if>
	</select>
	<select id="selectProductDetail" parameterType="web.com.itbay.product.model.ProductDTO" resultType="web.com.itbay.product.model.ProductDTO">
		SELECT * FROM PRODUCT_BOARD
			WHERE ID = #{id}
	</select>
	
</mapper>